# üå∏ Sarah Bernard Flower Shop

A modern, feature-rich React Native e-commerce mobile application for flower delivery built with Expo and Supabase.

[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)
[![React Native](https://img.shields.io/badge/React%20Native-0.81-blue.svg)](https://reactnative.dev/)
[![Expo](https://img.shields.io/badge/Expo-54-000020.svg)](https://expo.dev/)

## ‚ú® Features

### Customer Features
- üõçÔ∏è **Product Browsing**: Browse products by categories with advanced filtering
- üîç **Search & Filter**: Powerful search with category, price range, and sorting
- üõí **Shopping Cart**: Add products to cart (guest & authenticated users)
- ‚ù§Ô∏è **Wishlist**: Save favorite products
- üí≥ **Checkout**: Complete checkout flow with multiple payment methods
- üì¶ **Order Tracking**: View order history and track order status
- üë§ **User Profiles**: Manage profile, addresses, and preferences
- üéÅ **Combo Deals**: Special bundle offers with discounts
- üì± **Responsive Design**: Optimized for all screen sizes

### Admin Features
- üìä **Dashboard**: Analytics with charts and key metrics
- üìù **Product Management**: Create, edit, archive products with variants
- üè∑Ô∏è **Category Management**: Organize products with drag-and-drop reordering
- üì¶ **Order Management**: Process orders, update status
- üéÅ **Combo Management**: Create and manage bundle deals
- üìà **Analytics**: Sales charts, best sellers, revenue tracking

### Technical Features
- üîê **Security**: Row Level Security (RLS) policies, input validation
- üîÑ **Real-time Updates**: Live data sync with Supabase subscriptions
- üé® **Smooth Animations**: React Native Reanimated for 60fps animations
- üì± **Offline Support**: Guest cart persistence with AsyncStorage
- üîç **Error Tracking**: Integrated error boundary with Sentry support
- üß™ **Testing**: Comprehensive unit and integration tests
- üìù **Logging**: Structured logging with context
- üîÅ **Retry Logic**: Automatic retry for failed network requests
- ‚úÖ **Input Validation**: Client and server-side validation

---

## üèóÔ∏è Architecture

```
SarahBernardFlowerShop/
‚îú‚îÄ‚îÄ App.js                      # Root component with providers
‚îú‚îÄ‚îÄ index.js                    # Expo entry point
‚îú‚îÄ‚îÄ app.json                    # Expo configuration
‚îú‚îÄ‚îÄ eas.json                    # EAS Build configuration
‚îÇ
‚îú‚îÄ‚îÄ assets/                     # Static assets
‚îÇ   ‚îú‚îÄ‚îÄ fonts/                  # Custom fonts (PlusJakartaSans)
‚îÇ   ‚îú‚îÄ‚îÄ images/                 # App images
‚îÇ   ‚îî‚îÄ‚îÄ splash/                 # Splash screen
‚îÇ
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ components/             # Reusable UI components (15 files)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ErrorBoundary.js    # Error boundary component
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ProductCard.js      # Product display card
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ToastProvider.js    # Toast notifications
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ context/                # React Context providers
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ AuthContext.js      # Authentication state
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ CartContext.js      # Shopping cart state
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ AnimationContext.js # Animation state
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ services/               # API service layer
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ productService.js   # Product CRUD operations
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ orderService.js     # Order management
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ homeService.js      # Home screen data
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ utils/                  # Utility functions
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ logger.js           # Structured logging
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ validation.js       # Input validation
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ retry.js            # Retry logic
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ sentry.js           # Error tracking
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ config/                 # Configuration
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ constants.js        # App constants
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ theme.js            # Theme and styles
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ env.js              # Environment config
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ types/                  # Type definitions
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ index.js            # JSDoc types
‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ integrations/
‚îÇ       ‚îî‚îÄ‚îÄ supabase/
‚îÇ           ‚îî‚îÄ‚îÄ client.js       # Supabase client
‚îÇ
‚îú‚îÄ‚îÄ screens/                    # Screen components
‚îÇ   ‚îú‚îÄ‚îÄ HomeScreen.js           # Main feed
‚îÇ   ‚îú‚îÄ‚îÄ ProductScreen.js        # Product details
‚îÇ   ‚îú‚îÄ‚îÄ CheckoutScreen.js       # Checkout flow
‚îÇ   ‚îú‚îÄ‚îÄ admin/                  # Admin screens
‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îÇ
‚îú‚îÄ‚îÄ navigation/                 # Navigation structure
‚îÇ   ‚îî‚îÄ‚îÄ AdminNavigator.js       # Admin tab navigation
‚îÇ
‚îú‚îÄ‚îÄ supabase/                   # Database
‚îÇ   ‚îú‚îÄ‚îÄ migrations/             # SQL migrations
‚îÇ   ‚îî‚îÄ‚îÄ functions/              # Edge Functions
‚îÇ
‚îî‚îÄ‚îÄ __tests__/                  # Tests
    ‚îî‚îÄ‚îÄ ...
```

### Tech Stack

**Frontend:**
- React Native 0.81.4
- React 19.1.0
- Expo SDK 54
- React Navigation 6.x
- React Native Reanimated 4.x

**Backend:**
- Supabase (PostgreSQL + Auth + Storage + Edge Functions)
- Row Level Security (RLS)
- Real-time subscriptions

**State Management:**
- React Context API
- AsyncStorage for persistence

**Testing:**
- Jest
- React Native Testing Library

**Code Quality:**
- ESLint
- TypeScript (strict mode)

**Build & Deploy:**
- EAS Build
- EAS Submit
- EAS Update

---

## üöÄ Getting Started

### Prerequisites

- Node.js >= 18.0.0
- npm >= 9.0.0
- Expo CLI
- iOS Simulator (Mac only) or Android Emulator
- Supabase account

### Installation

1. **Clone the repository**

```bash
git clone https://github.com/yourusername/sarah-bernard-flower-shop.git
cd SarahBernardFlowerShop
```

2. **Install dependencies**

```bash
npm install
```

3. **Set up environment variables**

```bash
# Copy the example env file
cp .env.example .env

# Edit .env and add your Supabase credentials
SUPABASE_URL=your_supabase_url
SUPABASE_PUBLISHABLE_KEY=your_supabase_anon_key
SENTRY_DSN=your_sentry_dsn (optional)
```

4. **Set up Supabase**

- Create a new Supabase project at https://supabase.com
- Run the SQL migrations from `supabase/migrations/`
- Configure RLS policies (see `SECURITY_SETUP.md`)
- Deploy Edge Functions from `supabase/functions/`

5. **Start the development server**

```bash
npm start
```

6. **Run on device/emulator**

```bash
# iOS (Mac only)
npm run ios

# Android
npm run android

# Web
npm run web
```

---

## üß™ Testing

### Run Tests

```bash
# Run all tests
npm test

# Run tests in watch mode
npm run test:watch

# Run tests with coverage
npm run test:coverage

# Run tests for CI
npm run test:ci
```

### Test Structure

```
src/context/__tests__/
  ‚îú‚îÄ‚îÄ CartContext.test.js
  ‚îî‚îÄ‚îÄ AuthContext.test.js (add this)

src/services/__tests__/
  ‚îî‚îÄ‚îÄ productService.test.js (add this)

src/utils/__tests__/
  ‚îú‚îÄ‚îÄ validation.test.js (add this)
  ‚îî‚îÄ‚îÄ retry.test.js (add this)
```

See `TESTING_GUIDE.md` for comprehensive testing documentation.

---

## üì¶ Building for Production

### iOS

```bash
# Build for iOS App Store
npm run build:ios

# Submit to App Store
npm run submit:ios
```

### Android

```bash
# Build for Google Play Store
npm run build:android

# Submit to Play Store
npm run submit:android
```

### Over-The-Air Updates

```bash
# Push update to production
npm run update
```

---

## üîê Security

This application implements multiple security layers:

- **Row Level Security (RLS)**: Database-level access control
- **Input Validation**: Client and server-side validation
- **Input Sanitization**: XSS protection
- **Server-side Price Validation**: Prevent price manipulation
- **Safe Deletion**: Checks for dependencies before deletion
- **Environment Variables**: Secrets not committed to git
- **HTTPS Only**: Enforced secure connections

**Important Security Notes:**

1. ‚ö†Ô∏è **NEVER commit `.env` file to git**
2. Rotate Supabase keys if exposed
3. Review RLS policies before production
4. Enable Sentry for error monitoring
5. Test all validation rules

See `SECURITY_SETUP.md` for detailed security configuration.

---

## üêõ Error Monitoring

### Sentry Setup (Optional but Recommended)

```bash
# Install Sentry
npx @sentry/wizard@latest -i reactNative

# Add DSN to .env
SENTRY_DSN=your_sentry_dsn_here
```

See `SENTRY_SETUP.md` for complete setup guide.

---

## üìù Documentation

- **[SECURITY_SETUP.md](./SECURITY_SETUP.md)** - Security configuration guide
- **[SENTRY_SETUP.md](./SENTRY_SETUP.md)** - Error tracking setup
- **[TESTING_GUIDE.md](./TESTING_GUIDE.md)** - Testing best practices
- **[IMPLEMENTATION_GUIDE.md](./IMPLEMENTATION_GUIDE.md)** - Step-by-step implementation
- **[PRODUCTION_CHECKLIST.md](./PRODUCTION_CHECKLIST.md)** - Production readiness checklist

---

## üõ†Ô∏è Development

### Code Quality

```bash
# Lint code
npm run lint

# Fix linting issues
npm run lint:fix

# Type check
npm run type-check

# Run all validation
npm run validate
```

### Useful Commands

```bash
# Clear Metro cache
npm run start:clear

# Reset and reinstall
rm -rf node_modules && npm install

# Clear Expo cache
expo start -c
```

---

## üåç Environment Variables

Required environment variables:

| Variable | Description | Required |
|----------|-------------|----------|
| `SUPABASE_URL` | Supabase project URL | Yes |
| `SUPABASE_PUBLISHABLE_KEY` | Supabase anon/public key | Yes |
| `SENTRY_DSN` | Sentry error tracking DSN | No |

See `.env.example` for template.

---

## ü§ù Contributing

1. Fork the repository
2. Create your feature branch (`git checkout -b feature/AmazingFeature`)
3. Commit your changes (`git commit -m 'Add some AmazingFeature'`)
4. Push to the branch (`git push origin feature/AmazingFeature`)
5. Open a Pull Request

### Commit Convention

We use conventional commits:

- `feat:` New feature
- `fix:` Bug fix
- `docs:` Documentation changes
- `style:` Code style changes
- `refactor:` Code refactoring
- `test:` Test updates
- `chore:` Build/tooling changes

---

## üìÑ License

This project is licensed under the MIT License - see the [LICENSE](LICENSE) file for details.

---

## üôè Acknowledgments

- [Expo](https://expo.dev/) for the amazing framework
- [Supabase](https://supabase.com/) for the backend infrastructure
- [React Navigation](https://reactnavigation.org/) for navigation
- [React Native Reanimated](https://docs.swmansion.com/react-native-reanimated/) for animations

---

## üìû Support

- üìß Email: support@sarahbernard.kz
- üí¨ Telegram: @sarahbernardshop
- üì± WhatsApp: +77089217812

---

## üó∫Ô∏è Roadmap

- [ ] Push notifications for order updates
- [ ] Social auth (Google, Apple)
- [ ] Multi-language support (Russian, English, Kazakh)
- [ ] Payment gateway integration (Kaspi.kz)
- [ ] Loyalty program
- [ ] Product reviews and ratings
- [ ] In-app chat support
- [ ] Advanced analytics dashboard
- [ ] iOS widgets
- [ ] Apple Pay / Google Pay integration

---

Made with ‚ù§Ô∏è in Kazakhstan
